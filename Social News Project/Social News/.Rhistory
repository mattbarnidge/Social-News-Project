d$ng2.lik = d$C27
d$ng2.lik[d$filt!=1] <- NA
d$ng3.lik = d$C34
d$ng3.lik[d$filt!=1] <- NA
ltm::cronbach.alpha(cbind(d[,85], d[,99], d[,113]), na.rm=TRUE) #alpha = .737
d$ng.lik = rowMeans(cbind(d[,85], d[,99], d[,113]), na.rm=TRUE)
d$ng.lik[d$filt!=1] <- NA
#Closeness
d <- d %>% mutate(across(
.cols = all_of(c(86,100,114)),
~(recode(., "A" = 1, "B" = 2, "C" = 3, "D" = 4, "E" = 5, "F" = 6, "G" = 7, .default = NA_real_)),
.names = "{col}"))
d$ng1.clo = d$C21
d$ng1.clo[d$filt!=1] <- NA
d$ng2.clo = d$C28
d$ng2.clo[d$filt!=1] <- NA
d$ng3.clo = d$C35
d$ng3.clo[d$filt!=1] <- NA
ltm::cronbach.alpha(cbind(d[,86], d[,100], d[,114]), na.rm=TRUE) #alpha = .792
d$ng.clo = rowMeans(cbind(d[,86], d[,100], d[,114]), na.rm=TRUE)
d$ng.clo[d$filt!=1] <- NA
#Correlations
with(d, cor(cbind(ng.fam, ng.fri, ng.cow, ng.acq, ng.nei),
use="complete.obs", method="pearson"))
with(d, cor(cbind(ng.engage, ng.agree, ng.sim, ng.lik, ng.clo),
use="complete.obs", method="pearson"))
#Section D: Social Networks
#Network Size
d <- d %>% mutate(D36 = recode(D36, "None" = 1, "50 or fewer" = 2, "Between 51 and 150" = 3, "Between 151 and 500" = 4, "Between 501 and 1,000" = 5, "Between 1,001 and 2,000" = 6, "More than 2,000" = 7, .default = NA_real_))
d$netsize = d$D36
#News Network Size
d <- d %>% mutate(D37 = recode(D37, "None" = 1, "5 or fewer" = 2, "Between 6 and 10" = 3, "Between 11 and 25" = 4, "Between 26 and 50" = 5, "Between 51 and 100" = 6, "More than 100" = 7, .default = NA_real_))
d$newssize = d$D37
#Network Diversity Ties
d <- d %>% mutate(across(
.cols = all_of(c(118:125)),
~(recode(., "None" = 1, "A few" = 2, "A lot" = 3, "Many" = 4, "Most" = 5, .default = NA_real_)),
.names = "{col}"))
ltm::cronbach.alpha(d[,118:125], na.rm=TRUE) #alpha = .886
d$netdiv1 = rowMeans(d[,118:125], na.rm=TRUE)
#Network Diversity Occupation
d <- d %>% mutate(across(
.cols = all_of(c(126:147)),
~(recode(., "No" = 0, "Yes" = 1, .default = NA_real_)),
.names = "{col}"))
d$netdiv2 = rowSums(d[, 126:147], na.rm=TRUE)
#News Network Diversity
d <- d %>% mutate(across(
.cols = all_of(c(148:159)),
~(recode(., "None at all" = 1, "A little" = 2, "Some" = 3, "A lot" = 4, "A great deal" = 5, .default = NA_real_)),
.names = "{col}"))
ltm::cronbach.alpha(d[,148:159], na.rm=TRUE) #alpha = .887
d$netdiv3 = rowMeans(d[,148:159], na.rm=TRUE)
#Correlations
with(d, cor(cbind(netsize, newssize, netdiv1, netdiv2, netdiv3),
use="complete.obs", method="pearson"))
#Section E: News
#FB News
d <- d %>% mutate(E41 = recode(E41, "Never" = 1, "Several times a month" = 2, "Several times a week" = 3, "Once or twice a day" = 4, "Several times a day" = 5, .default = NA_real_))
d$fbnews = d$E41
#FB News Agree/Disagree
d <- d %>% mutate(across(
.cols = all_of(c(161:162)),
~(recode(., "Never" = 1, "Several times a month" = 2, "Several times a week" = 3, "Once or twice a day" = 4, "Several times a day" = 5, .default = NA_real_)),
.names = "{col}"))
d$fbnews.dis = d$E42_1
d$fbnews.agr = d$E42_2
#Follows for News
d <- d %>% mutate(across(
.cols = all_of(c(163:165)),
~(recode(., "Never" = 1, "Rarely" = 2, "Sometimes" = 3, "Often" = 4, "Very often" = 5, .default = NA_real_)),
.names = "{col}"))
ltm::cronbach.alpha(d[,163:165], na.rm=TRUE) #alpha = .910
d$follow = rowMeans(d[,163:165], na.rm=TRUE)
#Non-FB News
d <- d %>% mutate(across(
.cols = all_of(c(166:171)),
~(recode(., "Never" = 1, "Several times a month" = 2, "Several times a week" = 3, "Once or twice a day" = 4, "Several times a day" = 5, .default = NA_real_)),
.names = "{col}"))
d$olnews.msm = d$E44_1
d$olnews.olo = d$E44_2
d$npnews = d$E44_3
d$tvnews = d$E44_4
d$radnews = d$E44_5
d$appnews = d$E44_6
ltm::cronbach.alpha(d[,166:171], na.rm=TRUE) #alpha = .866
d$nfbnews = rowMeans(d[,166:171], na.rm=TRUE)
#Online News Engagement
d <- d %>% mutate(across(
.cols = all_of(c(172:175)),
~(recode(., "Never" = 1, "Several times a month" = 2, "Several times a week" = 3, "Once or twice a day" = 4, "Several times a day" = 5, .default = NA_real_)),
.names = "{col}"))
d$click = d$E45_1
d$scan = d$E45_2
d$read = d$E45_3
d$seek = d$E45_4
ltm::cronbach.alpha(d[,172:175], na.rm=TRUE) #alpha = .908
d$engage = rowMeans(d[,172:175], na.rm=TRUE)
#News Avoidance
d <- d %>% mutate(across(
.cols = all_of(c(176,178,179,180,182)),
~(recode(., "Strongly disagree" = 1, "Somewhat disagree" = 2, "Neither agree nor disagree" = 3, "Somewhat agree" = 4, "Strongly agree" = 5, .default = NA_real_)),
.names = "{col}"))
d <- d %>% mutate(across(
.cols = all_of(c(177,181)),
~(recode(., "Strongly disagree" = 5, "Somewhat disagree" = 4, "Neither agree nor disagree" = 3, "Somewhat agree" = 2, "Strongly agree" = 1, .default = NA_real_)),
.names = "{col}"))
cor(d[,177:178], use="complete.obs") #r = -.08
cor(d[,179:180], use="complete.obs") #r = .48
cor(d[,181:182], use="complete.obs") #r = -.20
d$avoid.single = d$E46_1
d$avoid.norms = d$E46_3
d$avoid.time = d$E46_4
d$avoid.emo = d$E46_5
d$avoid.soc = d$E46_7
ltm::cronbach.alpha(cbind(d[,176], d[,178:180], d[,182]), na.rm=TRUE) #alpha = .745
d$avoid = rowMeans(cbind(d[,176], d[,178:180], d[,182]), na.rm=TRUE)
#Unfriend
d <- d %>% mutate(across(
.cols = all_of(c(183:185)),
~(recode(., "Yes" = 1, "No" = 0, .default = NA_real_)),
.names = "{col}"))
ltm::cronbach.alpha(d[,183:185], na.rm=TRUE) #alpha = .799
d$unfriend = rowMeans(d[,183:185], na.rm=TRUE)
#Correlations
with(d, cor(cbind(fbnews, fbnews.agr, fbnews.dis, follow,
nfbnews, engage, avoid, unfriend),
use="complete.obs", method="pearson"))
#Section F: Talk
#Talk Frequency
d <- d %>% mutate(E48 = recode(E48, "Never" = 1, "Rarely" = 2, "Occassionally" = 3, "Frequently" = 4, "Very frequently" = 5, .default = NA_real_))
d$fbtalk.freq = d$E48
#Talk Network Size
d <- d %>% mutate(E49 = recode(E49, "None" = 1, "One or two" = 2, "Several" = 3, "Quite a few" = 4, "Many" = 5, .default = NA_real_))
d$fbtalk.size = d$E49
#FB Talk Agree/Disagree
d <- d %>% mutate(across(
.cols = all_of(c(188:189)),
~(recode(., "Never" = 1, "Rarely" = 2, "Occassionally" = 3, "Frequently" = 4, "Very frequently" = 5, .default = NA_real_)),
.names = "{col}"))
d$fbtalk.dis = d$E50_1
d$fbtalk.agr = d$E50_2
#FB Expression
d <- d %>% mutate(across(
.cols = all_of(c(190:195)),
~(recode(., "Never" = 1, "Rarely" = 2, "Occasionally" = 3, "Frequently" = 4, "Very frequently" = 5, .default = NA_real_)),
.names = "{col}"))
ltm::cronbach.alpha(d[,190:195], na.rm=TRUE) #alpha = .947
d$express = rowMeans(d[,190:195], na.rm=TRUE)
#Correlations
with(d, cor(cbind(fbtalk.freq, fbtalk.size,
fbtalk.dis, fbtalk.agr),
use="complete.obs", method="pearson"))
#Section G: Political Antecedents
#Efficacy
d <- d %>% mutate(across(
.cols = all_of(c(196:197)),
~(recode(., "Strongly disagree" = 1, "Somewhat disagree" = 2, "Neither agree nor disagree" = 3, "Somewhat agree" = 4, "Strongly agree" = 5, .default = NA_real_)),
.names = "{col}"))
d <- d %>% mutate(across(
.cols = all_of(c(198:199)),
~(recode(., "Strongly disagree" = 5, "Somewhat disagree" = 4, "Neither agree nor disagree" = 3, "Somewhat agree" = 2, "Strongly agree" = 1, .default = NA_real_)),
.names = "{col}"))
ltm::cronbach.alpha(d[,196:197], na.rm=TRUE) #alpha = .773
ltm::cronbach.alpha(d[,198:199], na.rm=TRUE) #alpha = .747
d$eff.i = rowMeans(d[,196:197], na.rm=TRUE)
d$eff.e = rowMeans(d[,198:199], na.rm=TRUE)
#Interest
d <- d %>% mutate(across(
.cols = all_of(c(200:202)),
~(recode(., "Not at all interested" = 1, "A little bit interested" = 2, "Somewhat interested" = 3, "Interested" = 4, "Very interested" = 5, .default = NA_real_)),
.names = "{col}"))
ltm::cronbach.alpha(d[,200:202], na.rm=TRUE) #alpha = .847
d$int = rowMeans(d[,200:202], na.rm=TRUE)
#Ideology
d$ideo = d$G54_N
#Party ID
d$pid <- NA
d$pid = ifelse(d$G55 == "Democrat" & d$G56a == "Strong", -3, d$pid)
d$pid = ifelse(d$G55 == "Democrat" & d$G56a == "Not that strong", -2, d$pid)
d$pid = ifelse(d$G55 == "Independent" & d$G56b == "Closer to the Democratic Party", -1, d$pid)
d$pid = ifelse(d$G55 == "Other party (please specify:)" & d$G56b == "Closer to the Democratic Party", -1, d$pid)
d$pid = ifelse(d$G55 == "Independent" & d$G56b == "Neither", 0, d$pid)
d$pid = ifelse(d$G55 == "Other party (please specify:)" & d$G56b == "Neither", 0, d$pid)
d$pid = ifelse(d$G55 == "Independent" & d$G56b == "Closer to the Republican Party", 1, d$pid)
d$pid = ifelse(d$G55 == "Other party (please specify:)" & d$G56b == "Closer to the Republican Party", 1, d$pid)
d$pid = ifelse(d$G55 == "Republican" & d$G56a == "Not that strong", 2, d$pid)
d$pid = ifelse(d$G55 == "Republican" & d$G56a == "Strong", 3, d$pid)
#Knowledge
d$know1[d$G57 == "Kamala Harris"] <- 1
d$know1[d$G57 != "Kamala Harris"] <- 0
d$know2[d$G58 == "Democrat"] <- 1
d$know2[d$G58 != "Democrat"] <- 0
d$know3[d$G59 == "Judicial branch"] <- 1
d$know3[d$G59 != "Judicial branch"] <- 0
d$know = with(d, rowSums(cbind(know1, know2, know3), na.rm=TRUE))
save(d, file="socnews.Rdata")
rm(d)
#Load Data
setwd("~/Documents/GitHub/Social-News-Project/Social News Project/Social News")
load("socnews.Rdata")
#Create ID var
d$ID = row.names(d)
#Filter
d$ng1.agree[d$name1 == 0] <- NA
d$ng2.agree[d$name2 == 0] <- NA
d$ng3.agree[d$name3 == 0] <- NA
d$ng1.sim[d$name1 == 0] <- NA
d$ng2.sim[d$name2 == 0] <- NA
d$ng3.sim[d$name3 == 0] <- NA
d$ng1.lik[d$name1 == 0] <- NA
d$ng2.lik[d$name2 == 0] <- NA
d$ng3.lik[d$name3 == 0] <- NA
d$ng1.clo[d$name1 == 0] <- NA
d$ng2.clo[d$name2 == 0] <- NA
d$ng3.clo[d$name3 == 0] <- NA
#Filter again
x <- subset(d, names > 0)
reg.vars <- x %>% select(age, gender, poc, edu, inc, fb.freq,
netsize, newssize, netdiv1, netdiv2, netdiv3,
fbnews, fbnews.dis, fbnews.agr, follow, nfbnews, engage, avoid, unfriend,
fbtalk.freq, fbtalk.size, fbtalk.dis, fbtalk.agr, express,
eff.i, eff.e, int, ideo, pid, know,
soccon, combel, soctrust, commtrust, newstrust, newstrust2,
govtrust, bustrust, scitrust)
x$ng1.st <- NA
is.na(x$ng1.st)
x$ng1.st = ifelse(x$ng1.fam == 1 | x$ng.fri == 1, 1, x$ng1.st)
x$ng1.st = ifelse(x$ng1.cow == 1 | x$ng.acq == 1 | x$ng.nei == 1, 0, x$ng1.st)
table(x$ng1.st)
126+129
x$ng1.st <- NA
x$ng1.st = ifelse(x$ng1.fam == 1 | x$ng1.fri == 1, 1, x$ng1.st)
x$ng1.st = ifelse(x$ng1.cow == 1 | x$ng1.acq == 1 | x$ng1.nei == 1, 0, x$ng1.st)
table(x$ng1.st)
91+305
x$ng2.st <- NA
x$ng2.st = ifelse(x$ng2.fam == 1 | x$ng2.fri == 1, 1, x$ng2.st)
x$ng2.st = ifelse(x$ng2.cow == 1 | x$ng2.acq == 1 | x$ng2.nei == 1, 0, x$ng2.st)
table(x$ng2.st)
x$ng3.st <- NA
x$ng3.st = ifelse(x$ng3.fam == 1 | x$ng3.fri == 1, 1, x$ng3.st)
x$ng3.st = ifelse(x$ng3.cow == 1 | x$ng3.acq == 1 | x$ng3.nei == 1, 0, x$ng3.st)
table(x$ng3.st)
x.st <- x %>% select(ID, ng1.st, ng2.st, ng3.st)
x.st <- x.st %>% rename(ng1 = ng1.st, ng2 = ng2.st, ng3 = ng3.st)
x.engage <- x %>% select(ID, ng1.engage, ng2.engage, ng3.engage)
x.engage <- x.engage %>% rename(ng1 = ng1.engage, ng2 = ng2.engage, ng3 = ng3.engage)
x.agree <- x %>% select(ID, ng1.agree, ng2.agree, ng3.agree)
x.agree <- x.agree %>% rename(ng1 = ng1.agree, ng2 = ng2.agree, ng3 = ng3.agree)
x.sim <- x %>% select(ID, ng1.sim, ng2.sim, ng3.sim)
x.sim <- x.sim %>% rename(ng1 = ng1.sim, ng2 = ng2.sim, ng3 = ng3.sim)
x.lik <- x %>% select(ID, ng1.lik, ng2.lik, ng3.lik)
x.lik <- x.lik %>% rename(ng1 = ng1.lik, ng2 = ng2.lik, ng3 = ng3.lik)
x.clo <- x %>% select(ID, ng1.clo, ng2.clo, ng3.clo)
x.clo <- x.clo %>% rename(ng1 = ng1.clo, ng2 = ng2.clo, ng3 = ng3.clo)
head(x.st)
head(reg.vars)
d.st <- cbind(x.st, reg.vars)
head(d.st)
d.engage <- cbind(x.engage, reg.vars)
d.agree <- cbind(x.agree, reg.vars)
head(d.engage)
head(d.agree)
d.sim <- cbind(x.sim, reg.vars)
d.lik <- cbind(x.lik, reg.vars)
d.clo <- cbind(x.clo, reg.vars)
long.st <- gather(d.st, ng, st, ng1:ng2, factor_key = TRUE)
head(long.st)
rm(long.st)
long.st <- gather(d.st, ng, st, ng1:ng3, factor_key = TRUE)
head(long.st)
long.engage <- gather(d.engage, ng, engage, ng1:ng3, factor_key = TRUE)
long.agree <- gather(d.agree, ng, agree, ng1:ng3, factor_key=TRUE)
long.sim <- gather(d.sim, ng, sim, ng1:ng3, factor_key=TRUE)
long.lik <- gather(d.lik, ng, lik, ng1:ng3, factor_key=TRUE)
long.clo <- gather(d.clo, ng, clo, ng1:ng3, factor_key=TRUE)
rm(x.st, x.engage, x.agree, x.sim, x.lik, x.clo, reg.vars)
long.t1 <- merge(long.st, long.engage, by=c("ID", "ng"))
head(long.t1)
rm(long.t1)
long.t1 <- merge(long.st, long.engage, by=c("ID", "ng"), all.x=TRUE)
head(long.t1)
long.t1 <- merge(long.st, long.engage, by=c("ID", "ng"), all=TRUE)
head(long.t1)
long.t1 <- merge(long.st, long.engage, by.x=c("ID", "ng"))
rm(long.t1)
long.t1 <- merge(long.st, long.engage, by=intersect(names(long.st), names(long.engage)))
head(long.t1)
head(long.t1)
head(long.st)
head(long.engage)
head(long.t1)
#Load Data
setwd("~/Documents/GitHub/Social-News-Project/Social News Project/Social News")
load("socnews.Rdata")
#Create ID var
d$ID = row.names(d)
#Filter
d$ng1.agree[d$name1 == 0] <- NA
d$ng2.agree[d$name2 == 0] <- NA
d$ng3.agree[d$name3 == 0] <- NA
d$ng1.sim[d$name1 == 0] <- NA
d$ng2.sim[d$name2 == 0] <- NA
d$ng3.sim[d$name3 == 0] <- NA
d$ng1.lik[d$name1 == 0] <- NA
d$ng2.lik[d$name2 == 0] <- NA
d$ng3.lik[d$name3 == 0] <- NA
d$ng1.clo[d$name1 == 0] <- NA
d$ng2.clo[d$name2 == 0] <- NA
d$ng3.clo[d$name3 == 0] <- NA
#Filter again
x <- subset(d, names > 0)
#Create dataframe for non RM vars
reg.vars <- x %>% select(age, gender, poc, edu, inc, fb.freq,
netsize, newssize, netdiv1, netdiv2, netdiv3,
fbnews, fbnews.dis, fbnews.agr, follow, nfbnews, engage, avoid, unfriend,
fbtalk.freq, fbtalk.size, fbtalk.dis, fbtalk.agr, express,
eff.i, eff.e, int, ideo, pid, know,
soccon, combel, soctrust, commtrust, newstrust, newstrust2,
govtrust, bustrust, scitrust)
#Create tie strength variable
x$ng1.st <- NA
x$ng1.st = ifelse(x$ng1.fam == 1 | x$ng1.fri == 1, 1, x$ng1.st)
x$ng1.st = ifelse(x$ng1.cow == 1 | x$ng1.acq == 1 | x$ng1.nei == 1, 0, x$ng1.st)
x$ng2.st <- NA
x$ng2.st = ifelse(x$ng2.fam == 1 | x$ng2.fri == 1, 1, x$ng2.st)
x$ng2.st = ifelse(x$ng2.cow == 1 | x$ng2.acq == 1 | x$ng2.nei == 1, 0, x$ng2.st)
x$ng3.st <- NA
x$ng3.st = ifelse(x$ng3.fam == 1 | x$ng3.fri == 1, 1, x$ng3.st)
x$ng3.st = ifelse(x$ng3.cow == 1 | x$ng3.acq == 1 | x$ng3.nei == 1, 0, x$ng3.st)
#Load Data
setwd("~/Documents/GitHub/Social-News-Project/Social News Project/Social News")
load("socnews.Rdata")
#Create tie strength variable
x$ng1.st <- NA
x$ng1.st = ifelse(x$ng1.fam == 1 | x$ng1.fri == 1, 1, x$ng1.st)
x$ng1.st = ifelse(x$ng1.cow == 1 | x$ng1.acq == 1 | x$ng1.nei == 1, 0, x$ng1.st)
x$ng2.st <- NA
x$ng2.st = ifelse(x$ng2.fam == 1 | x$ng2.fri == 1, 1, x$ng2.st)
x$ng2.st = ifelse(x$ng2.cow == 1 | x$ng2.acq == 1 | x$ng2.nei == 1, 0, x$ng2.st)
x$ng3.st <- NA
x$ng3.st = ifelse(x$ng3.fam == 1 | x$ng3.fri == 1, 1, x$ng3.st)
x$ng3.st = ifelse(x$ng3.cow == 1 | x$ng3.acq == 1 | x$ng3.nei == 1, 0, x$ng3.st)
#Load Data
setwd("~/Documents/GitHub/Social-News-Project/Social News Project/Social News")
load("socnews.Rdata")
#Create tie strength variable
d$ng1.st <- NA
d$ng1.st = ifelse(d$ng1.fam == 1 | d$ng1.fri == 1, 1, d$ng1.st)
d$ng1.st = ifelse(d$ng1.cow == 1 | d$ng1.acq == 1 | d$ng1.nei == 1, 0, d$ng1.st)
d$ng2.st <- NA
d$ng2.st = ifelse(d$ng2.fam == 1 | d$ng2.fri == 1, 1, d$ng2.st)
d$ng2.st = ifelse(d$ng2.cow == 1 | d$ng2.acq == 1 | d$ng2.nei == 1, 0, d$ng2.st)
d$ng3.st <- NA
d$ng3.st = ifelse(d$ng3.fam == 1 | d$ng3.fri == 1, 1, d$ng3.st)
d$ng3.st = ifelse(d$ng3.cow == 1 | d$ng3.acq == 1 | d$ng3.nei == 1, 0, d$ng3.st)
#Create ID var
d$ID = row.names(d)
d$ng1.st[d$name1 == 0] <- NA
d$ng2.st[d$name2 == 0] <- NA
d$ng3.st[d$name3 == 0] <- NA
d$ng1.engage[d$name1 == 0] <- NA
d$ng2.engage[d$name2 == 0] <- NA
d$ng3.engage[d$name3 == 0] <- NA
d$ng1.agree[d$name1 == 0] <- NA
d$ng2.agree[d$name2 == 0] <- NA
d$ng3.agree[d$name3 == 0] <- NA
d$ng1.sim[d$name1 == 0] <- NA
d$ng2.sim[d$name2 == 0] <- NA
d$ng3.sim[d$name3 == 0] <- NA
d$ng1.lik[d$name1 == 0] <- NA
d$ng2.lik[d$name2 == 0] <- NA
d$ng3.lik[d$name3 == 0] <- NA
d$ng1.clo[d$name1 == 0] <- NA
d$ng2.clo[d$name2 == 0] <- NA
d$ng3.clo[d$name3 == 0] <- NA
x <- subset(d, names > 0)
reg.vars <- x %>% select(age, gender, poc, edu, inc, fb.freq,
netsize, newssize, netdiv1, netdiv2, netdiv3,
fbnews, fbnews.dis, fbnews.agr, follow, nfbnews, engage, avoid, unfriend,
fbtalk.freq, fbtalk.size, fbtalk.dis, fbtalk.agr, express,
eff.i, eff.e, int, ideo, pid, know,
soccon, combel, soctrust, commtrust, newstrust, newstrust2,
govtrust, bustrust, scitrust)
x.st <- x %>% select(ID, ng1.st, ng2.st, ng3.st)
x.st <- x.st %>% rename(ng1 = ng1.st, ng2 = ng2.st, ng3 = ng3.st)
x.engage <- x %>% select(ID, ng1.engage, ng2.engage, ng3.engage)
x.engage <- x.engage %>% rename(ng1 = ng1.engage, ng2 = ng2.engage, ng3 = ng3.engage)
x.agree <- x %>% select(ID, ng1.agree, ng2.agree, ng3.agree)
x.agree <- x.agree %>% rename(ng1 = ng1.agree, ng2 = ng2.agree, ng3 = ng3.agree)
x.sim <- x %>% select(ID, ng1.sim, ng2.sim, ng3.sim)
x.sim <- x.sim %>% rename(ng1 = ng1.sim, ng2 = ng2.sim, ng3 = ng3.sim)
x.lik <- x %>% select(ID, ng1.lik, ng2.lik, ng3.lik)
x.lik <- x.lik %>% rename(ng1 = ng1.lik, ng2 = ng2.lik, ng3 = ng3.lik)
x.clo <- x %>% select(ID, ng1.clo, ng2.clo, ng3.clo)
x.clo <- x.clo %>% rename(ng1 = ng1.clo, ng2 = ng2.clo, ng3 = ng3.clo)
x.clo.plus <- cbind(x.clo, reg.vars)
long.st <- gather(d.st, ng, st, ng1:ng3, factor_key = TRUE)
long.engage <- gather(d.engage, ng, engage, ng1:ng3, factor_key = TRUE)
long.agree <- gather(d.agree, ng, agree, ng1:ng3, factor_key=TRUE)
long.sim <- gather(d.sim, ng, sim, ng1:ng3, factor_key=TRUE)
long.lik <- gather(d.lik, ng, lik, ng1:ng3, factor_key=TRUE)
long.clo.plus <- gather(d.clo, ng, clo, ng1:ng3, factor_key=TRUE)
long.st <- gather(x.st, ng, st, ng1:ng3, factor_key = TRUE)
long.engage <- gather(x.engage, ng, engage, ng1:ng3, factor_key = TRUE)
long.agree <- gather(x.agree, ng, agree, ng1:ng3, factor_key=TRUE)
long.sim <- gather(x.sim, ng, sim, ng1:ng3, factor_key=TRUE)
long.lik <- gather(x.lik, ng, lik, ng1:ng3, factor_key=TRUE)
long.clo.plus <- gather(x.clo.plus, ng, clo, ng1:ng3, factor_key=TRUE)
head(long.st)
head(long.engage)
long.t1 <- merge(long.st, long.engage, by=c("ID", "ng"))
head(long.t1)
table(long.t1$ID)
long.t2 <- merge(long.t1, long.agree, by=c("ID", "ng"))
head(long.t2)
long.t3 <- merge(long.t2, long.sim, by=c("ID", "ng"))
head(long.t3)
long.t4 <- merge(long.t3, long.lik, by=c("ID", "ng"))
head(long.t4)
long <- merge(long.t4, long.clo.plus, by=c("ID", "ng"))
head(long)
#Load Data
setwd("~/Documents/GitHub/Social-News-Project/Social News Project/Social News")
load("socnews.Rdata")
#Create tie strength variable
d$ng1.st <- NA
d$ng1.st = ifelse(d$ng1.fam == 1 | d$ng1.fri == 1, 1, d$ng1.st)
d$ng1.st = ifelse(d$ng1.cow == 1 | d$ng1.acq == 1 | d$ng1.nei == 1, 0, d$ng1.st)
d$ng2.st <- NA
d$ng2.st = ifelse(d$ng2.fam == 1 | d$ng2.fri == 1, 1, d$ng2.st)
d$ng2.st = ifelse(d$ng2.cow == 1 | d$ng2.acq == 1 | d$ng2.nei == 1, 0, d$ng2.st)
d$ng3.st <- NA
d$ng3.st = ifelse(d$ng3.fam == 1 | d$ng3.fri == 1, 1, d$ng3.st)
d$ng3.st = ifelse(d$ng3.cow == 1 | d$ng3.acq == 1 | d$ng3.nei == 1, 0, d$ng3.st)
#Create ID var
d$ID = row.names(d)
#Filter
d$ng1.st[d$name1 == 0] <- NA
d$ng2.st[d$name2 == 0] <- NA
d$ng3.st[d$name3 == 0] <- NA
d$ng1.engage[d$name1 == 0] <- NA
d$ng2.engage[d$name2 == 0] <- NA
d$ng3.engage[d$name3 == 0] <- NA
d$ng1.agree[d$name1 == 0] <- NA
d$ng2.agree[d$name2 == 0] <- NA
d$ng3.agree[d$name3 == 0] <- NA
d$ng1.sim[d$name1 == 0] <- NA
d$ng2.sim[d$name2 == 0] <- NA
d$ng3.sim[d$name3 == 0] <- NA
d$ng1.lik[d$name1 == 0] <- NA
d$ng2.lik[d$name2 == 0] <- NA
d$ng3.lik[d$name3 == 0] <- NA
d$ng1.clo[d$name1 == 0] <- NA
d$ng2.clo[d$name2 == 0] <- NA
d$ng3.clo[d$name3 == 0] <- NA
#Filter again
x <- subset(d, names > 0)
#Create dataframe for non RM vars
reg.vars <- x %>% select(age, gender, poc, edu, inc, fb.freq,
netsize, newssize, netdiv1, netdiv2, netdiv3,
fbnews, fbnews.dis, fbnews.agr, follow, nfbnews, engage, avoid, unfriend,
fbtalk.freq, fbtalk.size, fbtalk.dis, fbtalk.agr, express,
eff.i, eff.e, int, ideo, pid, know,
soccon, combel, soctrust, commtrust, newstrust, newstrust2,
govtrust, bustrust, scitrust)
#Create dataframes for RM vars
x.st <- x %>% select(ID, ng1.st, ng2.st, ng3.st)
x.st <- x.st %>% rename(ng1 = ng1.st, ng2 = ng2.st, ng3 = ng3.st)
x.engage <- x %>% select(ID, ng1.engage, ng2.engage, ng3.engage)
x.engage <- x.engage %>% rename(ng1 = ng1.engage, ng2 = ng2.engage, ng3 = ng3.engage)
x.agree <- x %>% select(ID, ng1.agree, ng2.agree, ng3.agree)
x.agree <- x.agree %>% rename(ng1 = ng1.agree, ng2 = ng2.agree, ng3 = ng3.agree)
x.sim <- x %>% select(ID, ng1.sim, ng2.sim, ng3.sim)
x.sim <- x.sim %>% rename(ng1 = ng1.sim, ng2 = ng2.sim, ng3 = ng3.sim)
x.lik <- x %>% select(ID, ng1.lik, ng2.lik, ng3.lik)
x.lik <- x.lik %>% rename(ng1 = ng1.lik, ng2 = ng2.lik, ng3 = ng3.lik)
x.clo <- x %>% select(ID, ng1.clo, ng2.clo, ng3.clo)
x.clo <- x.clo %>% rename(ng1 = ng1.clo, ng2 = ng2.clo, ng3 = ng3.clo)
#Cbind reg vars onto last dataframe
x.clo.plus <- cbind(x.clo, reg.vars)
#Clean up
rm(x, d)
#Put data into long form
long.st <- gather(x.st, ng, st, ng1:ng3, factor_key = TRUE)
long.engage <- gather(x.engage, ng, engage, ng1:ng3, factor_key = TRUE)
long.agree <- gather(x.agree, ng, agree, ng1:ng3, factor_key=TRUE)
long.sim <- gather(x.sim, ng, sim, ng1:ng3, factor_key=TRUE)
long.lik <- gather(x.lik, ng, lik, ng1:ng3, factor_key=TRUE)
long.clo.plus <- gather(x.clo.plus, ng, clo, ng1:ng3, factor_key=TRUE)
#Clean up
rm(reg.vars, x.agree, x.clo, x.clo.plus, x.engage, x.lik, x.sim, x.st)
#Merge
long.t1 <- merge(long.st, long.engage, by=c("ID", "ng"))
long.t2 <- merge(long.t1, long.agree, by=c("ID", "ng"))
long.t3 <- merge(long.t2, long.sim, by=c("ID", "ng"))
long.t4 <- merge(long.t3, long.lik, by=c("ID", "ng"))
long <- merge(long.t4, long.clo.plus, by=c("ID", "ng"))
#Clean up environment
rm(long.agree, long.clo, long.clo.plus, long.engage, long.sim, long.lik, long.st,
long.t1, long.t2, long.t3, long.t4)
with(long, (cor(cbind(st, engage, agree, sim, lik, clo),
use="complete.obs")))
with(long, (cor(cbind(st, engage.x, agree, sim, lik, clo),
use="complete.obs")))
save(long, file="long.Rdata")
rm(long)
#Load Data
setwd("~/Documents/GitHub/Social-News-Project/Social News Project/Social News")
load("long.Rdata")
load("socnews.Rdata")
